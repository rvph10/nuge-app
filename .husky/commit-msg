echo "ğŸ“ Nuge Commit Message: Validating commit message format..."

# Run commitlint to validate commit message
npx --no-install commitlint --edit "$1"

# Check if commitlint succeeded
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ COMMIT BLOCKED: Invalid commit message format!"
  echo ""
  echo "ğŸ’¡ What happened:"
  echo "   â€¢ Your commit message doesn't follow the conventional commit format"
  echo ""
  echo "ğŸ”§ Required format:"
  echo "   <type>(<scope>): <description>"
  echo ""
  echo "ğŸ“‹ Valid types for Nuge project:"
  echo "   â€¢ feat:     New feature"
  echo "   â€¢ fix:      Bug fix"  
  echo "   â€¢ docs:     Documentation changes"
  echo "   â€¢ style:    Code style changes (formatting, etc.)"
  echo "   â€¢ refactor: Code refactoring"
  echo "   â€¢ perf:     Performance improvements"
  echo "   â€¢ test:     Adding or updating tests"
  echo "   â€¢ chore:    Maintenance tasks"
  echo "   â€¢ ci:       CI/CD changes"
  echo "   â€¢ build:    Build system changes"
  echo ""
  echo "ğŸ—ï¸  Workspace-specific types:"
  echo "   â€¢ mobile:   Mobile app changes"
  echo "   â€¢ web:      Web app changes" 
  echo "   â€¢ api:      Backend API changes"
  echo "   â€¢ shared:   Shared code changes"
  echo "   â€¢ db:       Database changes"
  echo "   â€¢ deploy:   Deployment changes"
  echo ""
  echo "âœ… Good examples:"
  echo "   feat(mobile): add geolocation for vendor search"
  echo "   fix(api): resolve user authentication issue"
  echo "   docs: update setup instructions in README"
  echo "   chore: update dependencies"
  echo ""
  echo "âš¡ To bypass this check (not recommended):"
  echo "   git commit --no-verify -m \"your message\""
  echo ""
  exit 1
fi

echo "âœ… Commit message format is valid!"
echo "" 